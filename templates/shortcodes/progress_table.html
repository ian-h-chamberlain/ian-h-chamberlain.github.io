{% set percents = [25, 55, 85] %}
{% set levels = ["familiar", "experienced", "advanced"] %}

{% set callout_style = style | default(value="") %}

{# Basically just copied directly from the shortcode for `note`: #}
{% if callout_style %}
{% set class = "callout " ~ callout_style %}
  {% set icon = load_data(path="static/icon/" ~ callout_style ~ ".svg") %}
<blockquote class="{{ class }}">
    <div class="icon">
        {{ icon | safe }}
    </div>
{% endif %}

<div class="borderless progress-table content" style="max-width: {{ max_width | default(value='100%') }}">
  {% if header %}
  <p><strong>{{ header }}</strong></p>
  {% endif %}
  <table>
    <tbody>
      {% set data = load_data(format="yaml", literal=data) %}
      {% for row in data %}
      <tr>
        {% for entry_name, level in row %}
        {% set percent = percents[level] %}
        {% set level = levels[level] %}
        {# This ID count is maybe not perfect but hopefully good enough... #}
        {% set id = "progress-" ~ name ~ "-" ~ entry_name | slugify %}

        <td style="text-align:left">
          {{ entry_name }}
          <div class="progress">
            <progress id="{{ id }}" value="{{ percent }}" max="100" class="{{ level | slugify }}"></progress>
            {# <br />
            <label for="{{ id }}" class="{{ level | slugify }}">{{ level | capitalize }}</label> #}
          </div>
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% if callout_style %}
{% set class = "callout " ~ callout_style %}
</blockquote>
{% endif %}
